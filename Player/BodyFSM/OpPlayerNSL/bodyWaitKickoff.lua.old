module(..., package.seeall);

require('Body')
require('Motion')
require('walk')
require "Team"

t0 = 0;
--timeout=10.0;
--timeout=7.5;-- instead of 10 seconds
timeout = 4;
rClose=0.50;

function entry()
  print(_NAME..' entry');
  t0 = Body.get_time();

end

function update()
  t = Body.get_time();
  ball=vcm.get_ball();
  ballR=math.sqrt(ball.x^2+ball.y^2);

  if (t - ball.t < 0.1) and ballR<rClose then
    return "done";
  end

  if t-t0>timeout then
     return "done"
  end

  -- Non-attackers should move
  if Team.role~=1 then
    return "done"
  end
end

function exit()
   walk.start();
end
