#VRML_SIM V7.3.0 utf8
#############################################
# THOR-OP webots prototype file
# Based on Robotis wbt
# Converted and augmented by SJ
# 2013/7
#############################################
#CHANGES: More optimized lidar setup
#10/23: updated with correct mass properties and dimensions
#10/24: fixed joint positions according to actual robot
#10/30: fixed lidar offset
#11/5: re-enabled low leg bounding box (for kneeling)

PROTO THOROP7_NoBoundaries_ShortClawHook [
  field SFVec3f    translation 0 1 0
  field SFRotation rotation 0 1 0 0
  field SFString   controller "void"
  field SFString   controllerArgs ""
  field SFBool     synchronization TRUE
  field SFString   name "THOROP7"
  field SFVec2f    cameraWindowPosition 0 0
  field SFFloat    cameraPixelSize 1.0
  field SFInt32    cameraWidth 320
  field SFInt32    cameraHeight 180
	field SFFloat    cameraFov 1.0472
]
{
Robot {
  translation IS translation
  rotation IS rotation
  controller IS controller
  controllerArgs IS controllerArgs
  synchronization IS synchronization
  name IS name

  children [
    DEF neck_frame Transform {
      translation 0 0.035 0
      children [
        Shape {
          appearance Appearance {
            material Material {
              diffuseColor 0.243 0.243 0.243
              emissiveColor 0.08 0.08 0.08
              specularColor 0.1 0.1 0.1
            }
          }
          geometry Box {
            size 0.04 0.012 0.04
          }
        }
      ]
    }
    DEF Chest Transform {
      scale 0.001 0.001 0.001
      children [
        CHEST{}
      ]
    }
    InertialUnit {      
      name "InertialUnit"
    }
    Compass {
      name "Compass"
    }
    GPS {
      name "GPS"
    }
    Accelerometer {
      translation 0 0 0.02
      rotation 0 0.707107 0.707107 3.14159
      name "Accelerometer"
      lookupTable [
        -39.24 0 0
        39.24 1024 0
      ]
    }
    Gyro {
      rotation -0.57735 0.57735 0.57735 2.09
      name "Gyro"
      lookupTable [
        -27.925 0 0
        27.925 1024 0
      ]
    }
    DEF Chest_Lidar_yaw Servo {
      #Lidar center distance is 0.055
      #So chest lidar offset: (0,-0,10,0,05)
      

      translation 0 -0.045 0.05
      rotation 0 1 0 -1.046 #60 deg
      children [
        Solid{
          translation 0 0 0.01 #lidar chest offset
          rotation 0 0 1 1.57
	        children [
            hokuyo_thor_chest{
              name "ChestLidar"
              width 361
              #fieldOfView 3.14159
             }            
          ]
          physics Physics{
					  density -1
				    mass 0.1
				  } 
        }
      ]
      name "ChestLidarPan"
      physics Physics {
        density -1
        mass 0.2
      }
      maxVelocity 16
      maxForce 40
    }
    DEF RECEIVER Receiver {
      name "receiver"
      channel IS channel
    }
    DEF EMITTER Emitter {
      name "emitter"
      channel IS channel
    }

    DEF PHYSICS_RECEIVER Receiver {
      name "physics_receiver"
      type "serial"
      channel 10
      byteSize 192
    }
    DEF PHYSICS_EMITTER Emitter {
      name "physics_emitter"
      type "serial"
      byteSize 96
    }

    DEF Right_shoulder_pitch Servo {
      translation -0.234 0 0
      rotation -1 0 0 0
      children [
        DEF Right_shoulder_pitch Transform {
          translation 0.05 0 0
          rotation 0 0 1 -1.5708
          scale 0.001 0.001 0.001
          children [RIGHT_SHOULDER_PITCH{}]
        }
        DEF Right_shoulder_roll Servo {
          rotation 0 0 -1 0
          children [
            DEF Right_shoulder_yaw Servo {
              children [
                DEF Right_elbow_pitch Servo {
                  translation 0 -0.246 0.030
                  rotation -1 0 0 0
                  children [
                    DEF Right_wrist_yaw Servo {
                       translation 0 -0.186 -0.030
                      children [
                        DEF Right_wrist_roll Servo {
                          rotation 0 0 -1 0
                          children [
###ADDED WRISTYAW2 JOINT
                            DEF Right_wrist_yaw2 Servo {
                              translation 0 -0.130 0
                              rotation 0 1 0 0
                              children [
#############

######################################################################
# RGRIP START

              Transform{   #Palm 
                translation 0 -0.03 0
                children [Shape{geometry Box {size 0.05 0.06 0.05}}]
              }
			        DEF r_grip Servo{ # Trigger finger
      			    translation 0.02 -0.06 0.03
			          rotation 0 0 1 0
			          name "r_grip"
	      		     children[
		               Transform{
	                   translation 0 -0.04 0
										 # TODO: length and offset of trigger finger?
	                   children [Shape{geometry Box {size 0.01 0.08 0.015}}]
	                 }
	                #Bending part
	                 DEF r_trigger_2 Solid{ 
	                   translation 0 -0.075 0                 
	                   rotation 0 0 1 0                   
	                   name "r_trigger_2"
	                   children[
	                     Transform{
	                       translation -0.015 0 0
	                       children [Shape{geometry Box {size 0.03 0.01 0.015}}]
	                     }                 
	                  ]
	                }
			          ]
             }
	
						 DEF r_trigger Servo{ # Grip fingers
		           translation -0.01 -0.06 0
     		       rotation 0 0 1 0
			         name "r_trigger"
			          children[
			            Transform{
		                translation 0 -0.025 0
                    children [Shape{geometry Box {size 0.01 0.072 0.02}}]
                  }
	                # Splited 2nd digit
	                DEF r_thumb_2_1 Solid{ 
	                   translation -0.01 -0.05 0.015                   
	                   rotation 0 0 1 0.9                   
	                   name "r_thumb_2"
	                   children[
	                     Transform{
	                       translation 0 -0.0225 0
	                       children [Shape{geometry Box {size 0.01 0.028 0.015}}]
	                     }                 
	                  ]
	                }

	                DEF r_thumb_2_2 Solid{ 
	                   translation -0.01 -0.05 -0.015                   
	                   rotation 0 0 1 0.9                   
	                   name "r_thumb_2"
	                   children[
	                     Transform{
	                       translation 0 -0.0225 0
	                       children [Shape{geometry Box {size 0.01 0.028 0.015}}]
	                     }                 
	                  ]
                  }
	      			    ]
              }
					 
						 DEF r_passive_gripper Solid{ #index finger for gripper
		           translation 0.02 -0.06 0
     		       rotation 0 0 1 0
			         name "r_passive_gripper"
      		     children[
	               Transform{
                   translation 0 -0.025 0
                   children [Shape{geometry Box {size 0.01 0.064 0.015}}]
                 }
                #Bending part
                 DEF r_index_2 Solid{ 
                   translation 0 -0.05 0                   
                   rotation 0 0 1 -0.78                   
                   name "r_index_2"
                   children[
                     Transform{
                       translation 0.01 -0.02 0
                       children [Shape{geometry Box {size 0.01 0.029 0.015}}]
                     }                 
                  ]
                }
		          ]
              }
						


########################################################


  DEF HOOK_1 Servo {
    translation 0 -0.139 0.05    
    rotation    0 1 0 -1.57
    children [
      Shape{geometry Cylinder{height 0.16 radius 0.01}}
      Transform{
        translation -0.02 -0.07 0
        rotation    0 0 1 -1.57
        children [
          Shape{geometry Cylinder{height 0.04 radius 0.01}}          
        ]
      }
    ]      
    boundingObject Group{
      children[
        Shape{geometry Cylinder{height 0.16 radius 0.01}}
        Transform{
        translation -0.02 -0.07 0
        rotation    0 0 1 -1.57
        children [
          Shape{geometry Cylinder{height 0.04 radius 0.01}}          
        ]
      }
      ]
    }
    physics Physics{mass 0.01}  
 }





########################################################













# RGRIP END
######################################################################


                          ]
                          name "RightWristYaw2"
                          physics Physics {
                            density -1
                            mass 0.1                            
                          }
                          maxForce 40
                          controlP 16
                        }
                        DEF Right_wrist2 Transform {
                          translation 0 -0.065 0
                          children [Shape{geometry Box {size 0.04 0.130 0.04}}]
                        }                        
################
##WRISTYAW2 JOINT END
#################                

                          ]
                          name "RightWristRoll"
                          physics Physics {
                            density -1
                            mass 2.89
                            centerOfMass 0 -0.146 -0.0039
                          }
                          maxForce 40
                          controlP 16
                        }
                        DEF Right_wrist Transform {
                          scale 0.001 0.001 0.001
                          children [RIGHT_WRIST{}]
                        }
                      ]
                      name "RightWristYaw"
                      physics Physics { #Fixed
                        density -1
                        mass 0.81
                        centerOfMass 0 -0.0464 0.00
                      }
                      maxForce 40
                      controlP 16
                    }
                    DEF Right_elbow Transform {
                      translation 0 0 -0.03
                      rotation 0 1 0 3.14159
											scale 0.001 0.001 0.001
                      children [RIGHT_ELBOW{}]
                    }
                  ]
                  name "ArmLowerR"
                  physics Physics {
                    density -1
                    mass 0.13     #Fixed
                    centerOfMass 0 -0.0351 -0.03
                  }
                  maxForce 100
                  controlP 16
                }
                DEF Right_arm Transform {
                  translation 0 -0.027 0
                  rotation 0 1 0 3.14159
                  scale 0.001 0.001 0.001
                  children [RIGHT_ARM{}]
                }
              ]
              name "RightShoulderYaw"
              physics Physics { #Fixed
                density -1
                mass 2.89
                centerOfMass 0 -0.1027 0.008
              }
              maxForce 100
              controlP 16
            }
            DEF Right_shoulder_roll Transform {
              translation 0 0 0.024
              scale 0.001 0.001 0.001
              children [RIGHT_SHOULDER_ROLL{}]
            }
          ]
          name "ArmUpperR"
          physics Physics { #RshoulderRoll
            density -1
            mass 0.1
          }
          maxForce 100
          controlP 16
        }
      ]
      name "ShoulderR"
      physics Physics { #RshoulderPitch 
        density -1
        mass 0.1
      }
      maxForce 100
      controlP 16
    }
    DEF Left_shoulder_pitch Servo {
      translation 0.233 -0.008 0
      rotation 1 0 0 0
      children [
        DEF Left_shoulder_roll Servo {
          rotation 0 0 -1 0
          children [
            DEF Left_shoulder_yaw Servo {
              children [
                DEF Left_elbow_pitch Servo {
                  translation 0 -0.246 0.03
                  rotation 1 0 0 0
                  children [
                    DEF Left_wrist_yaw Servo {
                      translation 0 -0.186 -0.03
                      children [
                        DEF Left_wrist_roll Servo {
                          rotation 0 0 -1 0
                          children [
###ADDED WRISTYAW2 JOINT
                            DEF Left_wrist_yaw2 Servo {
                              translation 0 -0.130 0
                              rotation 0 1 0 0
                              children [
#############


######################################################################
# LGRIP START
						
              Transform{   #Palm 
                translation 0 -0.03 0
                children [Shape{geometry Box {size 0.05 0.06 0.05}}]
              }
			        DEF l_grip Servo{ # Trigger finger
      			    translation -0.02 -0.06 0.03
			          rotation 0 0 1 0
			          name "l_grip"
	      		     children[
		               Transform{
	                   translation 0 -0.04 0
										 # TODO: length and offset of trigger finger?
	                   children [Shape{geometry Box {size 0.01 0.08 0.015}}]
	                 }
	                #Bending part
	                 DEF l_trigger_2 Servo{ 
	                   translation 0 -0.075 0                 
	                   rotation 0 0 1 0                   
	                   name "l_trigger_2"
	                   children[
	                     Transform{
	                       translation 0.015 0 0
	                       children [Shape{geometry Box {size 0.03 0.01 0.015}}]
	                     }                 
	                  ]
	                }
			          ]

             }
	
						 DEF l_trigger Servo{ # Grip fingers
		           translation 0.01 -0.06 0
     		       rotation 0 0 1 0
			         name "l_trigger"
			          children[
			            Transform{
		                translation 0 -0.025 0
                    children [Shape{geometry Box {size 0.01 0.072 0.02}}]
                  }
	                # Splited 2nd digit
	                DEF l_thumb_2_1 Servo{ 
	                   translation 0.01 -0.05 0.015                   
	                   rotation 0 0 1 -0.9                   
	                   name "l_thumb_2_1"
	                   children[
	                     Transform{
	                       translation 0 -0.0225 0
	                       children [Shape{geometry Box {size 0.01 0.028 0.015}}]
	                     }                 
	                  ]
	                }

	                DEF r_thumb_2_2 Servo{ 
	                   translation 0.01 -0.05 -0.015                   
	                   rotation 0 0 1 -0.9                   
	                   name "r_thumb_2_2"
	                   children[
	                     Transform{
	                       translation 0 -0.0225 0
	                       children [Shape{geometry Box {size 0.01 0.028 0.015}}]
	                     }                 
	                  ]
	                }
									
      			    ]
            }
					 
						 DEF l_passive_gripper Servo{ #index finger for gripper
		           translation -0.02 -0.06 0
     		       rotation 0 0 1 0
			         name "l_passive_gripper"
      		     children[
	               Transform{
                   translation 0 -0.025 0
                   children [Shape{geometry Box {size 0.01 0.064 0.015}}]
                 }
                #Bending part
                 DEF l_index_2 Servo{ 
                   translation 0 -0.05 0                   
                   rotation 0 0 1 0.78                   
                   name "l_index_2"
                   children[
                     Transform{
                       translation -0.01 -0.02 0
                       children [Shape{geometry Box {size 0.01 0.029 0.015}}]
                     }                 
                  ]
                }
		          ]
            }
													
						DEF CLAW Servo {
              rotation 0 0 1 0
						  children [
                Transform{
                  translation 0 -0.14 -0.05
                  rotation 0 1 0 1.57
                  children[ Shape {
                     geometry Cylinder{
                      height 0.16
                      radius 0.01
                     }
                  } ]
                }
                Transform{
                  translation 0 -0.14 0.05
                  rotation 0 1 0 1.57
                  children[ Shape {
                     geometry Cylinder{
                      height 0.16
                      radius 0.01
                     }
                  } ]
                }                      
						  ]
              boundingObject Group{
                children[
                  Transform{
                    translation 0 -0.14 -0.05
                    rotation 0 1 0 1.57
                    children[ Shape {
                       geometry Cylinder{
                        height 0.16
                        radius 0.01
                       }
                    } ]
                  }
                  Transform{
                    translation 0 -0.14 0.05
                    rotation 0 1 0 1.57
                    children[ Shape {
                       geometry Cylinder{
                        height 0.16
                        radius 0.01
                       }
                    } ]
                  }                      
                ]
              }
              physics Physics {mass 0.1}
						}
							

# LGRIP END
######################################################################

                          ]
                          name "LeftWristYaw2"
                          physics Physics {
                            density -1
                            mass 0.1                            
                          }
                          maxForce 40
                          controlP 16
                        }
                        DEF Left_wrist2 Transform {
                          translation 0 -0.065 0
                          children [
                            Shape{geometry Box {size 0.04 0.130 0.04}}
                          ]
                        }                        
################
##WRISTYAW2 JOINT END
#################      

                          ]


                          name "LeftWristRoll"
                          physics Physics {
                            density -1
                            mass 2.89
                            centerOfMass 0 -0.146 -0.0039
                          }
                          maxForce 40
                          controlP 16
                        }
                        DEF Right_wrist Transform {
                          scale 0.001 0.001 0.001
                          children [RIGHT_WRIST{}]
                        }
                      ]
                      name "LeftWristYaw"
                      physics Physics { #Fixed
                        density -1
                        mass 0.81
                        centerOfMass 0 -0.0464 0.00
                      }
                      maxForce 40
                      controlP 16
                    }
                    DEF Left_elbow Transform {
                      translation 0 0 -0.03
											scale 0.001 0.001 0.001
                      children [LEFT_ELBOW{}]
                    }
                  ]
                  name "ArmLowerL"
                  physics Physics {
                    density -1
                    mass 0.13     #Fixed
                    centerOfMass 0 -0.0351 -0.03
                  }
                  maxForce 100
                  controlP 16
                }
                DEF Left_arm Transform {
                  translation 0 -0.027 0
                  scale 0.001 0.001 0.001
                  children [LEFT_ARM{}]
                }
              ]
              name "LeftShoulderYaw"
              physics Physics { #Fixed
                density -1
                mass 2.89
                centerOfMass 0 -0.1027 0.008
              }
              maxForce 100
              controlP 16
            }
            DEF Right_shoulder_roll Transform {
              translation 0 0 0.024
              scale 0.001 0.001 0.001
              children [RIGHT_SHOULDER_ROLL{}]
            }
          ]
          name "ArmUpperL"
          physics Physics { #RshoulderRoll
            density -1
            mass 0.1
          }
          maxForce 100
          controlP 16
        }
        DEF Left_shoulder_pitch Transform {
          translation -0.05 0 0
          rotation 0 0 1 1.5708
          scale 0.001 0.001 0.001
          children [LEFT_SHOULDER_PITCH{}]
        }
      ]
      name "ShoulderL"
      physics Physics { #LshoulderPitch 
        density -1
        mass 0.1
      }
      maxForce 100
      controlP 16
    }
    DEF Torso_pitch Servo {
      translation 0 -0.17 0
      rotation -1 0 0 0
      children [
        DEF Torso_yaw Servo {
#          translation 0 -0.038 0
# Updated based on latest document
          translation 0 -0.033 0
          children [
            DEF Pelvis Transform {
              translation 0 -0.0875 0
              scale 0.001 0.001 0.001
              children [PELVIS{}]
            }
            DEF Right_hip_yaw Servo {
              translation -0.072 -0.232 0
              rotation 0 -1 0 0
              children [
                DEF Right_hip_roll Servo {
                  rotation 0 0 -1 0
                  children [
                    DEF Right_hip_pitch Servo {
                      rotation 1 0 0 0
                      children [
                        DEF R_thigh Transform {
                          rotation 0 1 0 3.14159
                          scale 0.001 0.001 0.001
                          children [R_THIGH{}]
                        }
                        DEF Right_knee_pitch Servo {
                          translation 0 -0.3 -0.03
                          rotation 1 0 0 0
                          children [
                            DEF R_leg Transform {
                              translation 0 0 0.03
                              rotation 0 1 0 3.14159
                              scale 0.001 0.001 0.001
                              children [R_LEG{}]
                            }
                            DEF Right_ankle_pitch Servo {
                              translation 0 -0.3 0.03
                              rotation -1 0 0 0
                              children [
                                DEF Right_ankle_roll Servo {
                                  rotation 0 0 1 0
                                  children [
                                    DEF R_FSR TouchSensor {
                                      translation 0 -0.1115 0.018                                    
                                      name "R_FSR"
                                      boundingObject Box {size 0.145 0.012 0.26}
                                      physics Physics {
                                        density -1
                                        mass 0.0001
                                      }
                                      type "force"
                                    }                                    
                                    DEF Foot Transform {
                                      scale 0.001 0.001 0.001
                                      children [FOOT{}]
                                    }                                    
                                    DEF Right_ankle_yaw Servo {
                                      translation 0 -0.09 0
                                      name "right_ankle_yaw"
                                      physics Physics {
                                      }
                                      maxForce 100
                                      controlP 16
                                    }
                                  ]
                                  name "FootR"
                                  physics Physics {
                                    density -1
                                    mass 1.74
                                    centerOfMass 0 -0.0429 -0.0048
                                  }
                                  maxForce 100
                                  controlP 16
                                }
                                DEF Left_ankle Transform {
                                  scale 0.001 0.001 0.001
                                  children [LEFT_ANKLE{}]
                                }
                              ]
                              name "AnkleR"
                              physics Physics {
                                density -1
                                mass 0.1
                              }
                              maxForce 200
                              controlP 16
                            }
                          ]
                          name "LegLowerR"
                          physics Physics {
                            density -1
                            mass 2.24
                            centerOfMass -0.0313 -0.1796 0.0374
                          }
                          maxForce 200
                          controlP 16
                        }
                      ]
                      name "LegUpperR"
                      physics Physics {
                        density -1
                        mass 4.28
                        centerOfMass -0.0211 -0.1241 -0.0082
                      }
                      maxForce 200
                      controlP 16
                    }
                    DEF Right_hip_roll Transform {
                      scale 0.001 0.001 0.001
                      children [RIGHT_HIP_ROLL{}]
                    }
                  ]
                  name "PelvR"
                  physics Physics {
                    density -1
                    mass 0.1
                  }
                  maxForce 100
                  controlP 16
                }
                DEF Right_hip_yaw Transform {
                  translation 0 0.063 0
                  scale 0.001 0.001 0.001
                  children [LEFT_HIP_YAW{}]
                }
              ]
              name "PelvYR"
              physics Physics {
                density -1
                mass 0.01
              }
              maxForce 100
              controlP 16
            }
            DEF Left_hip_yaw Servo {
              translation 0.072 -0.232 0
              rotation 0 -1 0 0
              children [
                DEF Left_hip_roll Servo {
                  rotation 0 0 -1 0
                  children [
                    DEF Left_hip_pitch Servo {
                      rotation -1 0 0 0
                      children [
                        DEF L_thigh Transform {
                          scale 0.001 0.001 0.001
                          children [L_THIGH{}]
                        }
                        DEF Left_knee_pitch Servo {
                          translation 0 -0.3 -0.03
                          rotation -1 0 0 0
                          children [
                            DEF L_leg Transform {
                              translation 0 0 0.03
                              scale 0.001 0.001 0.001
                              children [L_LEG{}]
                            }
                            DEF Left_ankle_pitch Servo {
                              translation 0 -0.3 0.03
                              rotation 1 0 0 0
                              children [
                                DEF Left_ankle_roll Servo {
                                  rotation 0 0 1 0
                                  children [
                                    DEF L_FSR TouchSensor {
                                    translation 0 -0.1115 0.018                                                                        
                                      name "L_FSR"
                                      boundingObject Box {size 0.145 0.012 0.26}                                      
                                      physics Physics {
                                        density -1
                                        mass 0.0001
                                      }
                                      type "force"
                                    }
                                    DEF Foot Transform {
                                      scale 0.001 0.001 0.001
                                      children [FOOT{}]
                                    }
                                    DEF left_ankle_yaw Servo {
                                      translation 0 -0.09 0
                                      name "left_ankle_yaw"
                                      physics Physics {}
                                      maxForce 100
                                    }
                                  ]
                                  name "FootL"
                                  physics Physics {
                                    density -1
                                    mass 1.74
                                    centerOfMass 0 -0.0429 -0.0048
                                  }
                                  maxForce 100
                                  controlP 16
                                }
                                DEF Left_ankle Transform {
                                  scale 0.001 0.001 0.001
                                  children [LEFT_ANKLE{}]
                                }
                              ]
                              name "AnkleL"
                              physics Physics {
                                density -1
                                mass 0.1
                              }
                              maxForce 200
                              controlP 16
                            }
                          ]
                          name "LegLowerL"        
                          physics Physics { #Lower leg
                            density -1
                            mass 2.24
                            centerOfMass 0.0313 -0.1796 0.0374
                          }
                          maxForce 200
                          controlP 16
                        }
                      ]
                      name "LegUpperL"
                      physics Physics { #Upper leg
                        density -1
                        mass 4.28
                        centerOfMass 0.0211 -0.1241 -0.0082
                      }
                      maxForce 200
                      controlP 16
                    }
                    DEF Right_hip_roll Transform {
                      scale 0.001 0.001 0.001
                      children [RIGHT_HIP_ROLL{}]
                    }
                  ]
                  name "PelvL"
                  physics Physics { #Left hip roll
                    density -1
                    mass 0.1
                  }
                  maxForce 100
                  controlP 16
                }
                DEF Left_hip_yaw Transform {
                  translation 0 0.063 0
                  scale 0.001 0.001 0.001
                  children [LEFT_HIP_YAW{}]
                }
              ]
              name "PelvYL"
              physics Physics { #Left Hip Yaw
                density -1
                mass 0.1                
              }
              maxForce 100
              controlP 16
            }
          ]
          name "TorsoYaw"
          physics Physics {
            density -1
            mass 8.0
            centerOfMass 0 -0.1208 -0.0264            
          }
          maxForce 100
          controlP 16
        }
        DEF Torso_pitch_servo Transform {
          translation 0 -0.038 0
          rotation 1 0 0 0
          scale 0.001 0.001 0.001
          children [TORSO_PITCH_SERVO{}]
        }
      ]
      name "TorsoPitch"
      physics Physics {
        density -1
        mass 0.2
      }
      maxForce 200
      controlP 16
    }
    DEF Neck_yaw Servo {
      rotation 0 -1 0 0
      children [
        DEF Neck Transform {
          translation 0 0.05 0
          scale 0.001 0.001 0.001
          children [NECK{}]
        }
        DEF Head_pitch Servo {
          translation 0 0.161 0
          rotation -1 0 0 -0.17
          children [
#            hokuyo{
#						  rotation 0 1 0 3.14159
#              translation 0 0.1 0
#              name "HeadLidar"
#						}
            Camera {
						  rotation 0 1 0 3.14159
              translation 0 0.072 0.0785
              name "Camera"
              windowPosition IS cameraWindowPosition
              fieldOfView IS cameraFov
              width IS cameraWidth
              height IS cameraHeight
              pixelSize IS cameraPixelSize
              near 0.02
            }
            DEF CAM Transform {
              scale 0.001 0.001 0.001
              children [CAM{}]
            }
          ]
          name "Head"
          physics Physics {
            density -1
            mass 0.2
          }
          maxVelocity 16
          maxForce 40
        }
      ]
      name "Neck"
      physics Physics {
        density -1
        mass 0.1
        centerOfMass 0 0.06 0
      }
      maxForce 40
      controlP 16
    }
  ]
  name "THOROP_Robotis"
  physics Physics {
    density -1
    mass 9.21
    centerOfMass 0 0.1557 -0.0208
  }
  controller "void"
}
}
