<style>
  #container {
    background: #000;
    width: 400px;
    height: 300px;
  }
</style>

<div id="gyro">
</div>

<div id="container">
</div>

<script src="http://zeptojs.com/zepto.min.js"></script>
<script src="http://mrdoob.github.com/three.js/build/three.min.js"></script>
<script src="http://mrdoob.github.com/three.js/examples/js/controls/TrackballControls.js"></script>
<script src="http://mrdoob.github.com/three.js/examples/js/Detector.js"></script>
<script src="http://mrdoob.github.com/three.js/examples/js/libs/stats.min.js"></script>
<script src="lidar_gl.js"></script>
<script src="http://cdn.binaryjs.com/0/binary.js"></script>

<!--
<script src="/socket.io/socket.io.js"></script>
-->

<script>
  var ranges;
  var parts;
  /*
  var socket = io.connect('http://ese650.mooo.com');
  socket.on('imu', function (data) {
    $('#gyro').text( data.t+': Gyro: {'+data.Wy+', '+data.Wy+', '+data.Wz+'}' );
    // console.log(data);
    update_particles();
    // Send a reply
    //socket.emit('my other event', { my: 'data' });
  });
  */
  var client = new BinaryClient('ws://ese650.mooo.com:8080');
  client.on('stream', function(stream, meta){
    // Got new data
    stream.on('data', function(data){
      ranges = new Float32Array( data );
      update_particles( ranges );
      //console.log(ranges[0])
      //console.log( ranges.toString() );
      //console.log( data.byteLength.toString() );
    });
    stream.on('end', function(){
      // Done streaming!
    });
  });
</script>

